# A/B 테스트 계산기 — 제품 정책 문서

> **버전**: v6 (Mark5 - 방문 빈도 기반)
> **최종 수정**: 2025-02-07
> **상태**: 운영 중
> **문서 범위**: 계산기의 입력·피드백·계산·출력에 관한 정책과 동작 명세

| 날짜 | 변경 내용 |
|------|----------|
| 2025-02-07 | 최초 작성 (v6/Mark5 기준) |

---

## 목차

| # | 섹션 | 설명 |
|:-:|------|------|
| 1 | [개요](#1-개요) | 목적, 대상 사용자, 기술 스택 |
| 2 | [전체 흐름 요약](#2-전체-흐름-요약) | 입력 → 피드백 → 결과까지 한눈에 보기 |
| 3 | [기본값 · 권장값 요약](#3-기본값--권장값-요약) | 각 항목의 기본값과 권장 설정 (퀵 레퍼런스) |
| 4 | [입력 필드 상세 정책](#4-입력-필드-상세-정책) | 6개 입력 필드 + 고급 설정의 속성·선택지·규칙 |
| 5 | [유효성 검사](#5-유효성-검사) | 계산 버튼 클릭 시 실행되는 검증 규칙 |
| 6 | [실시간 피드백](#6-실시간-피드백) | 입력 중 표시되는 안내 메시지·프리뷰 정책 |
| 7 | [계산 로직](#7-계산-로직) | 고유 유저 추정, 샘플 크기, MDE, 슬롯 할당 공식 |
| 8 | [출력 결과](#8-출력-결과) | 결과 화면의 구성·표시 형식·SQL 쿼리 |

> 섹션 1~6은 **PM이 직접 참고하는 정책**, 섹션 7~8은 **기술 레퍼런스** 성격입니다.

---

## 1. 개요

### 1.1 목적

실험 플랫폼에서 A/B 테스트를 설계할 때 필요한 **샘플 크기**, **슬롯 배분**, **MDE(최소 검출 가능 효과)**를 자동 계산하여, PM이 실험 설계를 빠르게 의사결정할 수 있도록 돕는 도구입니다.

### 1.2 대상 사용자

- **PM (Product Manager)** — 실험 설계 및 트래픽 배분 의사결정
- 참고 사용자: 데이터 분석가, 개발자 (슬롯 해싱·SQL 쿼리 활용)

### 1.3 기술 스택

| 항목 | 내용 |
|------|------|
| Frontend | Vanilla JavaScript, HTML5, CSS3 |
| 통계 라이브러리 | jStat (CDN) |
| 통계 검정 | Two-proportion Z-test |
| 배포 | GitHub Pages |
| 슬롯 해싱 | `FARM_FINGERPRINT(user_id) MOD 10000` |

---

## 2. 전체 흐름 요약

사용자는 아래 순서로 입력하며, 계산기는 각 단계에서 실시간 피드백을 제공합니다.

```
[실험 조건]          [지표]             [목표]             [결과]
 ┌─────────┐        ┌─────────┐       ┌─────────┐       ┌──────────────┐
 │ 1.기간   │───────▶│ 5.현재  │──────▶│ 6.목표  │──────▶│ 필요 샘플    │
 │ 2.빈도   │  고유   │   지표  │  MDE   │   개선  │  계산  │ 슬롯 배분    │
 │ 3.방문수 │  유저   │         │  자동   │         │  하기  │ 고유 유저    │
 │ 4.배분   │  추정   │         │  계산   │         │  버튼  │ SQL 쿼리    │
 └─────────┘        └─────────┘       └─────────┘       └──────────────┘
      │                  │                 │
      ▼                  ▼                 ▼
  기간 피드백         MDE 프리뷰       목표 vs MDE 비교
  방문수 피드백       (검증 범위)      (달성 가능 여부)
  고유 유저 프리뷰                     기간 제안 버튼
```

| 단계 | 입력 | 자동 반응 |
|:---:|------|----------|
| 1 | 실험 기간 입력 | 기간 적정성 피드백 + 고유 유저 프리뷰 갱신 |
| 2 | 방문 빈도 선택 | 고유 유저 프리뷰 갱신 + MDE 프리뷰 갱신 |
| 3 | 하루 방문수 입력 | 방문수 피드백 + 고유 유저 프리뷰 갱신 |
| 4 | 배분 비율 선택 | 배분 설명 표시 + MDE 프리뷰 갱신 |
| 5 | 현재 지표 입력 | MDE 자동 계산 프리뷰 표시 |
| 6 | 목표 개선 입력 | 목표 vs MDE 비교 (불가 시 기간 제안 버튼) |
| 7 | **[계산하기]** 클릭 | 유효성 검사 → 결과 4개 섹션 표시 |

---

## 3. 기본값 · 권장값 요약

> 처음 사용하거나 빠르게 참고할 때 이 표를 활용하세요.

| 항목 | 기본값 | 권장값 | 비고 |
|------|:------:|:------:|------|
| 실험 기간 | 14일 | 14일 | 요일 효과를 완전히 제거하는 기간 |
| 방문 빈도 (K값) | 4.2 | 지면에 맞게 선택 | 모르면 4.2 (보수적 추정, 안전) |
| 하루 방문수 | — | 최근 2주~1개월 평균 | 데이터 기반 입력 권장 |
| 배분 비율 | 50:50 | 50:50 | 통계적 효율 100% (최고) |
| 유의수준 (Alpha) | 0.05 | 0.05 | 업계 표준 |
| 검정력 (Power) | 0.80 | 0.80 | 적정 민감도 |

---

## 4. 입력 필드 상세 정책

### 4.1 입력 필드 목록

실무 의사결정 흐름에 맞춰 **실험 조건 → 지표 → 목표** 순서로 입력합니다.

| 순서 | 한글이름 | 필드 ID | 라벨 (화면 표시) | 타입 |
|:---:|---------|---------|-----------------|------|
| 1 | 실험 기간 | `prop-duration` | 실험 기간은 며칠인가요? | number |
| 2 | 방문 빈도 | `visit-frequency` | 실험 기간 동안 사용자가 이 지면을 몇 번 방문하나요? | select |
| 3 | 하루 방문수 | `prop-daily-visitors` | 하루 몇 명이 방문하는 지면인가요? | number |
| 4 | 배분 비율 | `prop-allocation` | 실험군 배분 비율은 어떻게 하시겠어요? | select |
| 5 | 현재 지표 | `prop-baseline` | 목표 지표의 현재 수준은 얼마인가요? | number |
| 6 | 목표 개선 | `prop-mde` | 이 지표를 얼마나 개선하고 싶으신가요? | number + 버튼 |

### 4.2 필드별 상세 정책

#### 필드 1: 실험 기간

| 속성 | 값 |
|------|-----|
| HTML ID | `prop-duration` |
| 입력 타입 | `number` |
| 단위 | 일 |
| 기본값 | `14` |
| 최소값 | `1` |
| step | `1` |
| 필수 여부 | 필수 |
| 도움말 | 14일은 요일 효과를 제거하는 권장 기간입니다 |
| 권장 표시 | ⭐ 권장 (14일) |

#### 필드 2: 방문 빈도 (K값)

| 속성 | 값 |
|------|-----|
| HTML ID | `visit-frequency` |
| 입력 타입 | `select` |
| 기본 선택 | K=4.2 (평균 4회 이상) |

**선택지 목록 (역순 — 높은 K값부터)**

| K값 | 라벨 | 지면 예시 | 의미 |
|:---:|------|----------|------|
| 4.2 | 평균 4회 이상 | 메인홈, 검색홈 | 자주 방문, 중복 많음 → 고유 유저 적음 |
| 3.0 | 평균 3회 | 가게목록, 가게상세, 검색결과 | 보통 방문 |
| 2.0 | 평균 1~2회 | 주문내역, 주소설정 | 드문 방문 |
| 1.2 | 평균 1회 | 주문완료, 결제성공 | 1회성 지면, 거의 모두 다른 사람 |

> **기본값이 K=4.2인 이유**
> 보수적 추정입니다. K가 클수록 고유 유저를 적게 추정 → 필요 샘플을 더 확보 → 안전합니다.
> - 실제 K=3.0인데 4.2로 계산 → 괜찮음 (여유 있게 설계)
> - 실제 K=4.2인데 1.2로 계산 → 위험 (과소 추정)

> **K값과 실험 기간의 관계**
> 현재 코드에서 K값은 **실험 기간에 따라 변하지 않는 고정값**입니다.
> 사용자가 선택한 방문 빈도(4.2 / 3.0 / 2.0 / 1.2)가 기간과 무관하게 그대로 적용됩니다.
> 기간이 길어지면 고유 유저는 `(방문수 × 기간) ÷ K`로 선형 증가하며, K값 자체는 조정되지 않습니다.

#### 필드 3: 하루 방문수

| 속성 | 값 |
|------|-----|
| HTML ID | `prop-daily-visitors` |
| 입력 타입 | `number` |
| 단위 | 명/일 |
| placeholder | 예: 100000 |
| 최소값 | `1` |
| step | `1` |
| 필수 여부 | 필수 |
| 도움말 | 최근 2주~1개월 기준 하루 평균 방문자 수를 입력하세요 |

#### 필드 4: 배분 비율

| 속성 | 값 |
|------|-----|
| HTML ID | `prop-allocation` |
| 입력 타입 | `select` |
| 기본 선택 | 50:50 |
| 권장 표시 | ⭐ 권장 (50:50) |

**선택지 목록**

| 값 | 설명 문구 (화면 표시) |
|-----|------|
| `50:50` | ⭐ 가장 효율적인 배분 비율입니다 (기본값) |
| `60:40` | 균형잡힌 배분 비율입니다 |
| `70:30` | 실험군 비중을 낮춘 배분입니다 |
| `80:20` | 🛡️ 리스크를 최소화하는 배분 비율입니다 |
| `custom` | 직접 지정한 배분 비율입니다 |

- `custom` 선택 시 대조군·실험군 직접 입력 UI 표시 (각 1~99 범위)

#### 필드 5: 현재 지표 (Baseline)

| 속성 | 값 |
|------|-----|
| HTML ID | `prop-baseline` |
| 입력 타입 | `number` |
| 단위 | % |
| placeholder | 예: 3 |
| 범위 | `0` < x < `100` |
| step | `0.01` |
| 필수 여부 | 필수 |
| 도움말 | 현재 전환율, 클릭률 등의 지표를 입력하세요 |

#### 필드 6: 목표 개선 (MDE)

| 속성 | 값 |
|------|-----|
| HTML ID | `prop-mde` |
| 입력 타입 | `number` + 프리셋 버튼 |
| 단위 | % (상대 개선율) |
| placeholder | 예: 5 |
| 최소값 | `0` 초과 |
| step | `0.1` |
| 필수 여부 | 필수 |

**프리셋 버튼**

| 버튼 | 값 |
|:----:|:---:|
| +5% | `5` |
| +10% | `10` |
| +15% | `15` |
| +20% | `20` |

- 버튼 클릭 시 입력 필드에 값 자동 반영 + 버튼 활성(active) 표시
- 직접 입력 시 버튼 활성 상태 자동 동기화

### 4.3 고급 설정

접이식(collapsible) UI. 기본 접힌 상태.

#### 유의수준 (Alpha)

| 속성 | 값 |
|------|-----|
| HTML ID | `alpha-level` |
| 입력 타입 | `select` |
| 도움말 | 1종 오류 확률 (잘못된 긍정) |

| 값 | 라벨 | Z-score |
|:---:|------|:-------:|
| `0.05` | 0.05 (5%) - 권장 | 1.960 |
| `0.01` | 0.01 (1%) - 엄격 | 2.576 |
| `0.10` | 0.10 (10%) - 완화 | 1.645 |

#### 검정력 (Power)

| 속성 | 값 |
|------|-----|
| HTML ID | `power-level` |
| 입력 타입 | `select` |
| 도움말 | 2종 오류를 피할 확률 |

| 값 | 라벨 | Z-score |
|:---:|------|:-------:|
| `0.80` | 0.80 (80%) - 권장 | 0.840 |
| `0.90` | 0.90 (90%) - 높음 | 1.282 |
| `0.70` | 0.70 (70%) - 낮음 | 0.524 |

---

## 5. 유효성 검사

[계산하기] 버튼 클릭(폼 submit) 시 실행됩니다. 조건을 만족하지 않으면 `alert`으로 안내 후 계산을 중단합니다.

| 검사 순서 | 필드 | 실패 조건 | 알림 메시지 |
|:---------:|------|----------|------------|
| 1 | 현재 지표 | `0 < baseline < 100` 위반 | 현재 지표를 0~100 사이로 입력해주세요 |
| 2 | 목표 개선 | `mde <= 0` 또는 미입력 | 목표 개선폭을 0보다 큰 값으로 입력해주세요 |
| 3 | 하루 방문수 | `dailyVisitors < 1` 또는 미입력 | 하루 방문수를 입력해주세요 |
| 4 | 실험 기간 | `duration < 1` 또는 미입력 | 테스트 기간을 1일 이상으로 입력해주세요 |

---

## 6. 실시간 피드백

사용자가 값을 입력하는 중간 단계에서 표시되는 안내 메시지입니다. [계산하기] 버튼을 누르기 **전에** 동작합니다.

### 6.1 실험 기간 피드백

> **트리거**: `prop-duration` 값 변경 시 (`input` 이벤트)

| 조건 | 스타일 | 메시지 |
|------|:------:|--------|
| 미입력 또는 < 1 | 🔴 빨강 | ❌ 1일 이상 입력하세요 |
| 1 ≤ 기간 < 7 | ⚪ 회색 | 💡 {N}일은 7일 미만으로 요일 효과가 남을 수 있습니다 |
| = 7 | 🟢 초록 | ✅ 요일 효과를 제거하는 최소 권장 기간입니다 |
| 8 ~ 13 | 🟢 초록 | ✅ {N}일은 적절한 기간입니다 |
| ≥ 14 | 🟢 초록 | ✅ {N}일은 요일 효과를 완전히 제거하는 충분한 기간입니다 |

### 6.2 하루 방문수 피드백

> **트리거**: `prop-daily-visitors` 값 변경 시 (`input` 이벤트)

| 조건 | 스타일 | 메시지 |
|------|:------:|--------|
| 미입력 또는 < 1 | 🔴 빨강 | ❌ 1명 이상 입력하세요 |
| 1 ≤ 방문수 < 1,000 | ⚪ 회색 | 💡 방문수가 적어 실험 기간이 길어질 수 있습니다 |
| ≥ 1,000 | — | (피드백 숨김) |

### 6.3 고유 유저 프리뷰

> **트리거**: 기간 · 방문 빈도 · 하루 방문수 중 하나라도 변경 시
> **표시 조건**: dailyVisitors ≥ 1 AND duration ≥ 1
> **위치**: 3번 필드(하루 방문수) 아래, 파란색 박스

**표시 형식**

- 💡 예상 고유 유저: 약 **{uniqueUsers}명**
- 📊 계산: ({dailyVisitors} × {duration}일) ÷ {K값} = {uniqueUsers}명
- {emoji} {K값별 안내 메시지}

**K값별 안내 메시지**

| K값 | Emoji | 메시지 |
|:---:|:-----:|--------|
| 4.2 | 🏠 | 메인홈처럼 자주 방문하는 지면이라 한 사람이 4번 이상 들어올 거예요 |
| 3.0 | 🔍 | 평균 3회 방문하는 지면이라 실제 사람 수는 방문 수의 1/3 정도예요 |
| 2.0 | 📋 | 평균 1~2회 방문하는 지면이라 절반 정도가 같은 사람의 재방문이에요 |
| 1.2 | 🎯 | 주문완료처럼 1회성 지면이라 거의 모든 방문이 다른 사람이에요 |

### 6.4 MDE 자동 계산 프리뷰

> **트리거**: 1~5번 필드(기간 · 빈도 · 방문수 · 배분 · 현재 지표) 중 변경 시
> **표시 조건**: dailyVisitors ≥ 1 AND duration ≥ 1 AND baseline > 0
> **위치**: 5번 필드(현재 지표) 아래, 초록색 박스

**표시 형식**

- 🎯 이 조건에서 검증 가능한 범위
- 최소 **{MDE}%** 개선부터 통계적으로 확인 가능
- {baseline}%p → {newValue}%p (절대 {absChange}%p 개선)
- MDE 계산 실패(유저 부족 등) 시: 박스 숨김

### 6.5 목표 개선 예시

> **트리거**: 5번(현재 지표) 또는 6번(목표 개선) 값 변경 시
> **위치**: 6번 필드 아래

| 조건 | 표시 |
|------|------|
| baseline + mde 모두 입력 | 예: {baseline}% → {newValue}% ({mde}% 상대 개선) |
| baseline만 입력 | 목표 개선율을 입력하세요 |
| 둘 다 없음 | (숨김) |

### 6.6 목표 vs MDE 비교

> **트리거**: 6번(목표 개선) 값 변경 또는 MDE 버튼 클릭 시
> **표시 조건**: 목표 개선값 + MDE 자동 계산값 모두 존재
> **위치**: 6번 필드 아래

| 조건 | 스타일 | 메시지 |
|------|:------:|--------|
| 목표 > MDE × 1.5 | 🟢 성공 | 📊 최소 효과: {MDE}% ▸ **목표({목표}%)는 충분히 검증 가능합니다 ✅** |
| MDE ≤ 목표 ≤ MDE × 1.5 | 🟡 주의 | ⚠️ 최소 {MDE}%부터 확인 가능 ▸ 목표({목표}%)는 간신히 검증 범위에 있습니다 |
| 목표 < MDE | 🔴 불가 | ⚠️ 최소 {MDE}%여야 확인 가능 ▸ **목표({목표}%)는 검증하기 어려워요** ▸ 기간 제안 버튼 표시 |

**기간 제안 버튼** (목표 < MDE인 경우)

| 제안 기간 | 표시 조건 | 동작 |
|:---------:|----------|------|
| 14일 | 현재 기간 < 14이고, 14일로 늘리면 MDE ≤ 목표 | `14일로 재계산` 버튼 |
| 21일 | 현재 기간 < 21이고, 21일로 늘리면 MDE ≤ 목표 | `21일로 재계산` 버튼 |
| 30일 | 현재 기간 < 30이고, 30일로 늘리면 MDE ≤ 목표 | `30일로 재계산` 버튼 |

- 버튼 클릭 시: 기간 필드 자동 변경 → 고유 유저 프리뷰 · MDE 프리뷰 · 비교 모두 재계산

---

> 아래 섹션 7~8은 **기술 레퍼런스**입니다. 계산 공식과 출력 구조를 상세히 기술합니다.

---

## 7. 계산 로직

### 7.1 고유 유저 추정

**고유 유저 = round( (하루 방문수 × 실험 기간) ÷ K값 )**

| 변수 | 설명 | 예시 |
|------|------|------|
| 하루 방문수 | 일일 방문자 수 | 100,000 |
| 실험 기간 | 실험 일수 | 14 |
| K값 | 한 사람이 실험 기간 동안 평균 방문 횟수 | 4.2 |
| **결과** | **고유 유저** | **333,333명** |

> K가 클수록 중복이 많다 → 고유 유저 적음
> K가 작을수록 중복이 적다 → 고유 유저 많음

### 7.2 샘플 크기 계산 (Two-proportion Z-test)

**변수 정의**

| 기호 | 변수 | 설명 |
|:----:|------|------|
| p₁ | baseline / 100 | 대조군 전환율 |
| p₂ | p₁ × (1 + MDE/100) | 실험군 기대 전환율 |
| Z_α | Z-score (alpha) | 유의수준에 따른 값 |
| Z_β | Z-score (power) | 검정력에 따른 값 |
| κ | kappa | 실험군/대조군 비율 |

**Z-score 매핑**

| Alpha | Z_α | Power | Z_β |
|:-----:|:---:|:-----:|:---:|
| 0.05 | 1.960 | 0.80 | 0.840 |
| 0.01 | 2.576 | 0.90 | 1.282 |
| 0.10 | 1.645 | 0.70 | 0.524 |

**공식**

- **n₁** = (Z_α + Z_β)² × [ p₁(1-p₁) + p₂(1-p₂)/κ ] / (p₂ - p₁)²
- **n₂** = n₁ × κ
- **총 필요 샘플** = ceil(n₁ + n₂)

**배분 비율 → κ 계산**

- controlRatio = 대조군 비율 / (대조군 + 실험군)
- treatmentRatio = 실험군 비율 / (대조군 + 실험군)
- **κ = treatmentRatio / controlRatio**

| 배분 | controlRatio | treatmentRatio | κ |
|:----:|:------------:|:--------------:|:---:|
| 50:50 | 0.50 | 0.50 | 1.00 |
| 60:40 | 0.60 | 0.40 | 0.67 |
| 70:30 | 0.70 | 0.30 | 0.43 |
| 80:20 | 0.80 | 0.20 | 0.25 |

### 7.3 MDE 역계산 (이진 탐색)

현재 조건에서 통계적으로 검증 가능한 **최소 개선율**을 자동 계산합니다.

**알고리즘 파라미터**

| 파라미터 | 값 |
|----------|-----|
| 탐색 범위 | 0.1% ~ 200% (상대 개선율) |
| 최대 반복 | 50회 |
| 종료 정밀도 | 0.01% (high - low < 0.0001) |
| 방법 | 이진 탐색 (binary search) |

**탐색 절차**

1. low = 0.001, high = 2.0 으로 초기화
2. mid = (low + high) / 2
3. mid를 MDE로 사용하여 필요 샘플 계산
4. 필요 샘플 ≤ 고유 유저 → bestMDE = mid, high = mid (더 작은 MDE 시도)
5. 필요 샘플 > 고유 유저 → low = mid (더 큰 MDE 시도)
6. 50회 반복 또는 정밀도 도달 시 종료

### 7.4 슬롯 할당

| 파라미터 | 값 |
|----------|-----|
| 총 슬롯 수 | **10,000개** (0~9,999) |
| 해싱 방식 | device_id → FARM_FINGERPRINT → MOD 10000 |

**계산 순서**

| 단계 | 공식 |
|------|------|
| 슬롯당 유저 수 | 고유 유저 / 10,000 |
| 필요 슬롯 수 | ceil( 총 필요 샘플 / 슬롯당 유저 수 ) |
| 슬롯 사용률(%) | 필요 슬롯 / 10,000 × 100 |
| 대조군 슬롯 수 | ceil( 필요 슬롯 × controlRatio ) |
| 실험군 슬롯 수 | 필요 슬롯 - 대조군 슬롯 수 |
| 대조군 슬롯 범위 | 1 ~ 대조군 슬롯 수 |
| 실험군 슬롯 범위 | (대조군 슬롯 수 + 1) ~ 필요 슬롯 수 |

### 7.5 배분 효율성

50:50 대비 현재 배분 비율의 효율성을 계산합니다.

- **t** = treatmentRatio / (controlRatio + treatmentRatio)
- **상대 효율성** = 4 × t × (1 - t)
- **효율(%)** = 상대 효율성 × 100
- **추가 샘플 배수** = 1 / 상대 효율성

| 배분 | 효율(%) | 추가 샘플 배수 |
|:----:|:-------:|:-------------:|
| 50:50 | 100% | 1.00배 |
| 60:40 | 96% | 1.04배 |
| 70:30 | 84% | 1.19배 |
| 80:20 | 64% | 1.56배 |

---

## 8. 출력 결과

[계산하기] 버튼 클릭 후 표시되는 결과 영역입니다.

### 8.1 화면 구성

| 순서 | 섹션 | 아이콘 | 스타일 |
|:---:|------|:------:|--------|
| 1 | 필요 샘플 | 📊 | 기본 카드 (회색 배경) |
| 2 | 슬롯 배분 | 🎰 | 강조 카드 (파란색 그라데이션 + 테두리) |
| 3 | 고유 유저 추정 | 📈 | 기본 카드 + 노란 계산 박스 |
| 4 | SQL 쿼리 | 📝 | 접이식 (기본 접힘) |

### 8.2 필요 샘플 섹션

| 카드 | 내용 | 형식 |
|------|------|------|
| 대조군 (A안) | n₁ | {숫자} (천 단위 쉼표) |
| 실험군 (B안) | n₂ | {숫자} |
| 총 필요 샘플 | n₁ + n₂ | {숫자} |
| 배분 효율 | 효율성 퍼센트 | {N}% |

### 8.3 슬롯 배분 섹션

| 항목 | 형식 |
|------|------|
| 전체 슬롯 범위 | 1~{N} |
| 슬롯 사용률 | 전체 슬롯의 {N}% (10,000개 중 {M}개) |
| 대조군 슬롯 | 1~{N} |
| 실험군 슬롯 | {N+1}~{M} |

### 8.4 고유 유저 추정 섹션

**계산 과정 표시**

- 총 방문 수: {dailyVisitors} × {duration}일 = {totalVisits}회
- 추정 고유 유저: {totalVisits}회 ÷ {K값} = **{uniqueUsers}명**

**K값 설명 표시**

- {emoji} **{K값 라벨}**
- {K값별 안내 메시지}

### 8.5 SQL 쿼리 섹션

접이식(collapsible) UI. "📝 슬롯 추출 쿼리 보기" 클릭 시 펼침.

슬롯 번호에 따라 control / treatment / excluded 그룹을 분류하는 BigQuery 쿼리가 자동 생성됩니다.

| 요소 | 내용 |
|------|------|
| 해싱 함수 | `MOD(ABS(FARM_FINGERPRINT(CAST(user_id AS STRING))), 10000)` |
| control 범위 | `BETWEEN 0 AND {대조군슬롯수 - 1}` |
| treatment 범위 | `BETWEEN {대조군슬롯수} AND {전체슬롯수 - 1}` |
| 나머지 | excluded |
| 날짜 범위 | 오늘 - duration일 ~ 어제 (자동 생성) |
| GROUP BY | user_id |

---

> **헤더**: A/B 테스트 계산기 / 전환율 개선을 위한 샘플 수 계산 / Mark5 - 방문 빈도 기반
> **푸터**: Built by zonetwo.project (mailto 링크) | GitHub
